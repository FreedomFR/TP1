<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Tp 1</title>
    </head>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <body>
    <div class="container">
        <div class="div1" id="div-add">
            <div id="voirArea" style="position: relative;">
                <img src="images/Krustytheclown.png" usemap="#shapes-map"  alt="image" class="imgUse" id="divV">
            </div>
            <map name="shapes-map" id="map"></map>
            <br>
            <br>
            <div id="ListAllArea">
                <label>Liste des aires de la map</label>
            </div>
        </div>
        <div class="div2">
            <label>Nom de la map</label>
            <input type="text" id="nomMap"/>
            <br>
            <br>
            <label>id de l'air</label>
            <input type="text" id="idAir"/>
            <br>
            <br>
            <label>Action</label>
            <input type="text"/>
            <br>
            <br>
            <label>Type d'air</label>
            <select name="type" id="type" onchange="changerDiv()">
                <option value="">--Choisir un type--</option>
                <option value="rect">Carre</option>
                <option value="circle">Cercle</option>
            </select>
            <br>
            <br>
            <br>
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

            <div class='circleBase' id='rotateMode'>
                <div class="top">
                    <button id="haut" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-arrow-up"></span></button>
                </div>

                <div class="middle">
                    <button id="gauche" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-arrow-left"></span></button>
                    <button id="droite" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-arrow-right"></span></button>
                </div>

                <div class="bottom">
                    <button id="bas" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-arrow-down"></span></button>
                </div>
            </div>
            Posiblilité d'utiliser les flèches du clavier
            <br>
            <br>
            <br>
            <div class="pointObjet" id="divCarre" style="display: block">
                <label>Point 1</label>
                <br>
                X <input type="text" size="1" id="x1"/>
                Y <input type="text" size="1" id="y1"/>
                <br>
                <label>Point 2</label>
                <br>
                X <input type="text" size="1" id="x2"/>
                Y <input type="text" size="1" id="y2"/>
                <br>
                <br>
            </div>
            <div class="pointObjet" id="divCercle" style="display: none">
                <label>centre</label>
                <br>
                X <input type="text" size="1" id="xc1"/>
                Y <input type="text" size="1" id="yc1"/>
                <br>
                <label>Rayon</label>
                <br>
                <input type="text" size="1" id="rayon"/>
                <br>
                <br>
            </div>
            <br>
            <br>
            <div>
                <button id="modifier">Modifier</button>
                <button id="creer">Créer</button>
            </div>
        </div>
    </div>
    </body>
</html>

<script>
    let idArea = 0;

    class objectMap
    {
        urlImage;
        nomMap;
        objetArea = [];
        constructor(urlImage, nomMap, objetArea)
        {
            this.urlImage = urlImage;
            this.nomMap = nomMap;
            this.objetArea = objetArea;
        }

        getUrlImage() {
            return this.urlImage;
        }
        getNomMap() {
            return this.nomMap;
        }
        NomMap(nomMap) {
            this.nomMap = nomMap;
        }
        getObjet(id) {
            let elm;
            this.objetArea.forEach(element => {
                if (parseInt(element.getId()) === parseInt(id))
                {
                    elm = element;
                }
            });
            return elm;
        }
        addObjet(objectPoint)
        {
            this.objetArea.push(objectPoint);
            //arrayObjetArea.push(objectPoint);
        }

        changeXMap(x, id, t)
        {
            this.objetArea.forEach(element => {
                if (parseInt(element.getId()) === parseInt(id))
                {
                    element.setChangeX(x, t);
                    //console.log(element);
                }
            });
        }
        changeYMap(y, id, t)
        {
            this.objetArea.forEach(element => {
                if (parseInt(element.getId()) === parseInt(id))
                {
                    element.setChangeY(y, t);
                    //console.log(element);
                }
            });
        }

    }

    class objectAreaCarre
    {
        idArea;
        TypeArea;
        ensembleObjectPoint = [];

        constructor(idArea, TypeArea, ensembleObjectPoint)
        {
            this.idArea = idArea;
            this.TypeArea = TypeArea;
            this.ensembleObjectPoint = ensembleObjectPoint;
        }

        // get getlastId()
        // {
        //     return this.idArea;
        // }

        getId()
        {
            return this.idArea;
        }

        getEnsembleObjectPoint()
        {
            return this.ensembleObjectPoint;
        }

        addEnsembleObjectPoint(objectPoint)
        {
            this.ensembleObjectPoint.push(objectPoint);
        }

        setChangeY(y, t)
        {
            this.ensembleObjectPoint.forEach(element => {
                if(t === 0)
                {
                    element[0].changeY(y);
                    // console.log(element[0]);
                }
                else if(t === 1)
                {
                    element[1].changeY(y);
                    // console.log(element[1]);
                }
                else if(t === 2)
                {
                    element.changeY(y);
                    // console.log(element);
                }
            });
        }
        setChangeX(x, t)
        {
            this.ensembleObjectPoint.forEach(element => {
                if(t === 0)
                {
                    element[0].changeX(x);
                    // console.log(element[0]);
                }
                else if(t === 1)
                {
                    element[1].changeX(x);
                    // console.log(element[1]);
                }
                else if(t === 2)
                {
                    element.changeX(x);
                    // console.log(element);
                }
            });
        }

        TestAfficherObjetDansConsole()
        {
            console.log(this);
        }

    }

    class objectAreaCercle
    {
        idArea;
        TypeArea;
        ensembleObjectPoint = [];

        constructor(idArea, TypeArea, ensembleObjectPoint)
        {
            this.idArea = idArea;
            this.TypeArea = TypeArea;
            this.ensembleObjectPoint = ensembleObjectPoint;
        }

        // get getlastId()
        // {
        //     return this.idArea;
        // }

        getId()
        {
            return this.idArea;
        }

        getEnsembleObjectPoint()
        {
            return this.ensembleObjectPoint;
        }

        addEnsembleObjectPoint(objectPoint)
        {
            this.ensembleObjectPoint.push(objectPoint);
        }

        setChangeY(y, t)
        {
            this.ensembleObjectPoint.forEach(element => {
                if(t === 0)
                {
                    element[0].changeY(y);
                    // console.log(element[0]);
                }
                else if(t === 1)
                {
                    element[1].changeY(y);
                    // console.log(element[1]);
                }
                else if(t === 2)
                {
                    element.changeY(y);
                    // console.log(element);
                }
            });
        }
        setChangeX(x, t)
        {
            this.ensembleObjectPoint.forEach(element => {
                if(t === 0)
                {
                    element[0].changeX(x);
                    //console.log(element[0]);
                }
                else if(t === 1)
                {
                    element[1].changeX(x);
                    //console.log(element[1]);
                }
                else if(t === 2)
                {
                    element.changeX(x);
                    //console.log(element);
                }
            });
        }



        TestAfficherObjetDansConsole()
        {
            console.log(this);
        }

    }

    class objectPoint
    {
        x;
        y;
        r;
        constructor(x, y, r)
        {
            this.x = x;
            this.y = y;
            this.r = r;
        }

        getCoordonne()
        {
            return this.x + ',' + this.y;
        }

       changeX(x)
        {
            this.x = x;
        }

        changeY(y)
        {
            this.y = y;
        }

        changeR(r)
        {
            this.r = r;
        }

        TestAfficherObjetDansConsole()
        {
            //console.log(this);
        }
    }


    function changerDiv(type = null)
    {
        let select = document.getElementById("type");

        if(type == null)
        {
            type = select.value;
        }

        //console.log(type);

        var divCercle = document.getElementById("divCercle");
        var divCarre = document.getElementById("divCarre");
        if(type == 'rect')
        {
            //console.log(divCercle);
            divCarre.style.display = "block";
            divCercle.style.display = "none";
        }
        if(type == 'circle')
        {
            //console.log(divCercle);
            divCarre.style.display = "none";
            divCercle.style.display = "block";
        }
    }

    function deplacer(id)
    {
        // let id = $(this).attr('id');

        let type;

        // valeur carre
        let x1;
        let x2;
        let y1;
        let y2;

        // valeur cercle
        let xc1;
        let yc1;
        let rayon;

        document.getElementById('idAir').value = id;

        let objetAll = objetmap.getObjet(id);
        getEnsemblePoint();
        changerDiv(type);

        function getEnsemblePoint()
        {
            objetAll.ensembleObjectPoint.forEach(element => {

                if(element.r == null)
                {
                    x1 = element[0].x;
                    x2 = element[1].x;
                    y1 = element[0].y;
                    y2 = element[1].y;
                    type = "rect";
                }
                else
                {
                    xc1 = element.x;
                    yc1 = element.y;
                    rayon = element.r;
                    type = "circle";
                }

            });
        }

        document.onkeydown = checkKey;

        function checkKey(e) {

            e = e || window.event;

            if (e.keyCode == '38') {
                deplacehaut();
            }
            else if (e.keyCode == '40') {
                deplaceBas();
            }
            else if (e.keyCode == '37') {
                deplaceGauche();
            }
            else if (e.keyCode == '39') {
                deplaceDroite();
            }


        }

        function AfficherListeArea()
        {
            var tablearea = document.getElementById('ListAllArea'),
                table = document.createElement('table');

            for (var i = 1; i < 4; i++) {
                var tr = document.createElement('tr');

                tr.appendChild( document.createElement('td') );
                tr.appendChild( document.createElement('td') );

                tr.cells[0].appendChild( document.createTextNode('Text1') )
                tr.cells[1].appendChild( document.createTextNode('Text2') );

                table.appendChild(tr);
            }

            tablearea.appendChild(table);
        }

        document.getElementById('x1').value = x1;
        document.getElementById('x2').value = x2;
        document.getElementById('y1').value = y1;
        document.getElementById('y2').value = y2;

        function deplaceDroite()
        {
            getEnsemblePoint();

            if(type == "rect")
            {
                let parseX1 = parseInt(x1);
                let parseX2 = parseInt(x2);

                parseX1 += 1;
                parseX2 += 1;
                objetmap.changeXMap((parseX1).toString(), id, 0);
                objetmap.changeXMap((parseX2).toString(), id, 1);
                //objetmap.changeXMap((parseX2).toString(), id);
                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                if(parseInt(x2) > parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 + 'px';
                    div.style.top = y1 + 'px';
                }
                else if(parseInt(x2) < parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1- (y1 - y2) + 'px';
                }
                else if (parseInt(x2) > parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left =  x1 + 'px';
                    div.style.top = y1 - (y1 - y2) + 'px';
                }
                else if (parseInt(x2) < parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1 + 'px';
                }

                area.coords = x1 + ',' + y1 + ',' + x2 + ',' + y2;

                document.getElementById('x1').value = (parseX1).toString();
                document.getElementById('x2').value = (parseX2).toString();
            }
            if(type == "circle")
            {

                let parseX = parseInt(xc1);

                parseX += 1;

                objetmap.changeXMap((parseX).toString(), id, 2);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                div.style.left = xc1 - rayon + "px";
                div.style.top = yc1 - rayon + "px";

                area.coords = xc1 + ',' + yc1 + ',' + rayon;

                document.getElementById('xc1').value = (parseX).toString();

            }
        }

        function deplaceGauche()
        {
            getEnsemblePoint();

            if(type == "rect")
            {
                let parseX1 = parseInt(x1);
                let parseX2 = parseInt(x2);

                parseX1 -= 1;
                parseX2 -= 1;
                objetmap.changeXMap((parseX1).toString(), id, 0);
                objetmap.changeXMap((parseX2).toString(), id, 1);
                //objetmap.changeXMap((parseX2).toString(), id);
                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                if(parseInt(x2) > parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 + 'px';
                    div.style.top = y1 + 'px';
                }
                else if(parseInt(x2) < parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1- (y1 - y2) + 'px';
                }
                else if (parseInt(x2) > parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left =  x1 + 'px';
                    div.style.top = y1 - (y1 - y2) + 'px';
                }
                else if (parseInt(x2) < parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1 + 'px';
                }

                area.coords = x1 + ',' + y1 + ',' + x2 + ',' + y2;

                document.getElementById('x1').value = (parseX1).toString();
                document.getElementById('x2').value = (parseX2).toString();
            }
            if(type == "circle")
            {
                let parseX = parseInt(xc1);

                parseX -= 1;

                objetmap.changeXMap((parseX).toString(), id, 2);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                div.style.left = xc1 - rayon + "px";
                div.style.top = yc1 - rayon + "px";

                area.coords = xc1 + ',' + yc1 + ',' + rayon;

                document.getElementById('xc1').value = (parseX).toString();
            }
        }

        function deplacehaut()
        {
            getEnsemblePoint();

            if(type == "rect")
            {
                let parseY1 = parseInt(y1);
                let parseY2 = parseInt(y2);

                parseY1 -= 1;
                parseY2 -= 1;
                objetmap.changeYMap((parseY1).toString(), id, 0);
                objetmap.changeYMap((parseY2).toString(), id, 1);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                if(parseInt(x2) > parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 + 'px';
                    div.style.top = y1 + 'px';
                }
                else if(parseInt(x2) < parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1- (y1 - y2) + 'px';
                }
                else if (parseInt(x2) > parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left =  x1 + 'px';
                    div.style.top = y1 - (y1 - y2) + 'px';
                }
                else if (parseInt(x2) < parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1 + 'px';
                }

                area.coords = x1 + ',' + y1 + ',' + x2 + ',' + y2;

                document.getElementById('y1').value = (parseY1).toString();
                document.getElementById('y2').value = (parseY2).toString();
            }
            if(type == "circle")
            {
                let parseY = parseInt(yc1);

                parseY -= 1;

                objetmap.changeYMap((parseY).toString(), id, 2);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                div.style.top = yc1 - rayon + "px";
                div.style.left = xc1 - rayon + "px";
                area.coords = xc1 + ',' + yc1 + ',' + rayon;

                document.getElementById('yc1').value = (parseY).toString();
            }
        }

        function deplaceBas()
        {
            getEnsemblePoint();

            if(type == "rect")
            {
                let parseY1 = parseInt(y1);
                let parseY2 = parseInt(y2);

                parseY1 += 1;
                parseY2 += 1;
                objetmap.changeYMap((parseY1).toString(), id, 0);
                objetmap.changeYMap((parseY2).toString(), id, 1);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                if(parseInt(x2) > parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 + 'px';
                    div.style.top = y1 + 'px';
                }
                else if(parseInt(x2) < parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1- (y1 - y2) + 'px';
                }
                else if (parseInt(x2) > parseInt(x1) && parseInt(y2) < parseInt(y1))
                {
                    div.style.width = (x2 - x1) + 'px';
                    div.style.height = (y1 - y2) + 'px';
                    div.style.left =  x1 + 'px';
                    div.style.top = y1 - (y1 - y2) + 'px';
                }
                else if (parseInt(x2) < parseInt(x1) && parseInt(y2) > parseInt(y1))
                {
                    div.style.width = (x1 - x2) + 'px';
                    div.style.height = (y2 - y1) + 'px';
                    div.style.left = x1 - (x1 - x2) + 'px';
                    div.style.top = y1 + 'px';
                }

                area.coords = x1 + ',' + y1 + ',' + x2 + ',' + y2;

                document.getElementById('y1').value = (parseY1).toString();
                document.getElementById('y2').value = (parseY2).toString();
            }
            if(type == "circle")
            {
                let parseY = parseInt(yc1);

                parseY += 1;

                objetmap.changeYMap((parseY).toString(), id, 2);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                div.style.top = yc1 - rayon + "px";
                div.style.left = xc1 - rayon + "px";

                area.coords = xc1 + ',' + yc1 + ',' + rayon;

                document.getElementById('yc1').value = (parseY).toString();
            }
        }

        document.getElementById('droite').onclick = function()
        {
            deplaceDroite();
        }

        document.getElementById('gauche').onclick = function()
        {
            deplaceGauche();
        }

        document.getElementById('bas').onclick = function()
        {
            deplaceBas();
        }

        document.getElementById('haut').onmousedown = function()
        {
            deplacehaut();
        }

        document.getElementById('modifier').onclick = function()
        {

            if(type == "rect")
            {
                // Point 1
                let x1 = document.getElementById("x1");
                let y1 = document.getElementById("y1");

                // point 2
                let x2 = document.getElementById("x2");
                let y2 = document.getElementById("y2");

                // Si valeur null
                if(x1.value.length === 0)
                {
                    x1.value = 0;
                }
                if(y1.value.length === 0)
                {
                    y1.value = 0;
                }
                if(x2.value.length === 0)
                {
                    x2.value = 50;
                }
                if(y2.value.length === 0)
                {
                    y2.value = 50;
                }

                objetmap.changeXMap(x1.value, id, 0);
                objetmap.changeXMap(x2.value, id, 1);
                objetmap.changeYMap(y1.value, id, 0);
                objetmap.changeYMap(y2.value, id, 1);

                let area = document.getElementById("area" + id);
                let div = document.getElementById("div" + id);

                if(parseInt(x2.value) > parseInt(x1.value) && parseInt(y2.value) > parseInt(y1.value))
                {
                    div.style.width = (x2.value - x1.value) + 'px';
                    div.style.height = (y2.value - y1.value) + 'px';
                    div.style.left = x1.value + 'px';
                    div.style.top = y1.value + 'px';
                }
                else if(parseInt(x2.value) < parseInt(x1.value) && parseInt(y2.value) < parseInt(y1.value))
                {
                    div.style.width = (x1.value - x2.value) + 'px';
                    div.style.height = (y1.value - y2.value) + 'px';
                    div.style.left = x1.value - (x1.value - x2.value) + 'px';
                    div.style.top = y1.value - (y1.value - y2.value) + 'px';
                }
                else if (parseInt(x2.value) > parseInt(x1.value) && parseInt(y2.value) < parseInt(y1.value))
                {
                    div.style.width = (x2.value - x1.value) + 'px';
                    div.style.height = (y1.value - y2.value) + 'px';
                    div.style.left =  x1.value + 'px';
                    div.style.top = y1.value - (y1.value - y2.value) + 'px';
                }
                else if (parseInt(x2.value) < parseInt(x1.value) && parseInt(y2.value) > parseInt(y1.value))
                {
                    div.style.width = (x1.value - x2.value) + 'px';
                    div.style.height = (y2.value - y1.value) + 'px';
                    div.style.left = x1.value - (x1.value - x2.value) + 'px';
                    div.style.top = y1.value + 'px';
                }

                area.coords = x1.value + ',' + y1.value + ',' + x2.value + ',' + y2.value;
            }
            else if (type == "circle")
            {
                // Point 1
                let xc1 = document.getElementById("xc1");
                let yc1 = document.getElementById("yc1");

                // rayon
                let rayon = document.getElementById("rayon");

                if(xc1.value.length === 0)
                {
                    xc1.value = 50;
                }
                if(yc1.value.length === 0)
                {
                    yc1.value = 50;
                }
                if(rayon.value.length === 0)
                {
                    rayon.value = 30;
                }


            }
        }
    }

    let objetmap = new objectMap('images/Krustytheclown.png', 'krusty', []);

    document.getElementById('creer').onclick = function()
    {
        let select = document.getElementById("type");
        let type = select.value;
        //console.log(type);

        if(type.length != 0)
        {
            if(type === "rect")
            {
                //console.log(type);

                // Point 1
                let x1 = document.getElementById("x1");
                let y1 = document.getElementById("y1");

                // point 2
                let x2 = document.getElementById("x2");
                let y2 = document.getElementById("y2");

                // Si valeur null
                if(x1.value.length === 0)
                {
                    x1.value = 0;
                }
                if(y1.value.length === 0)
                {
                    y1.value = 0;
                }
                if(x2.value.length === 0)
                {
                    x2.value = 50;
                }
                if(y2.value.length === 0)
                {
                    y2.value = 50;
                }


                let myObjet1 = new objectPoint(x1.value, y1.value);
                let myObjet2 = new objectPoint(x2.value, y2.value);

                let ensembleObjectPoint = [
                    myObjet1,
                    myObjet2
                ];

                let myobjectArea = new objectAreaCarre();

                //console.log( myobjectArea.getEnsembleObjectPoint());

                myobjectArea.idArea  = idArea += 1;
                myobjectArea.TypeArea = type;
                myobjectArea.ensembleObjectPoint = [];
                myobjectArea.addEnsembleObjectPoint(ensembleObjectPoint);
                //idArea += 1;

                objetmap.addObjet(myobjectArea);

                let map = document.getElementById("map");

                let area = document.createElement("area");
                area.shape = type;
                area.coords = x1.value + ',' + y1.value + ',' + x2.value + ',' + y2.value;
                area.className = "areaMap";
                area.href = "#";
                area.id = "area" + (idArea).toString();

                map.appendChild(area);

                let div = document.getElementById("div-add");
                div.appendChild(map);

                let divVoirArea = document.getElementById("voirArea");
                let rect = document.createElement('div');
                rect.style.position = 'absolute';
                rect.style.display = "block";
                rect.style.opacity = "0.5";

                if(parseInt(x2.value) > parseInt(x1.value) && parseInt(y2.value) > parseInt(y1.value))
                {
                    rect.style.width = (x2.value - x1.value) + 'px';
                    rect.style.height = (y2.value - y1.value) + 'px';
                    rect.style.left = x1.value + 'px';
                    rect.style.top = y1.value + 'px';
                }
                else if(parseInt(x2.value) < parseInt(x1.value) && parseInt(y2.value) < parseInt(y1.value))
                {
                    rect.style.width = (x1.value - x2.value) + 'px';
                    rect.style.height = (y1.value - y2.value) + 'px';
                    rect.style.left = x1.value - (x1.value - x2.value) + 'px';
                    rect.style.top = y1.value - (y1.value - y2.value) + 'px';
                }
                else if (parseInt(x2.value) > parseInt(x1.value) && parseInt(y2.value) < parseInt(y1.value))
                {
                    rect.style.width = (x2.value - x1.value) + 'px';
                    rect.style.height = (y1.value - y2.value) + 'px';
                    rect.style.left =  x1.value + 'px';
                    rect.style.top = y1.value - (y1.value - y2.value) + 'px';
                }
                else if (parseInt(x2.value) < parseInt(x1.value) && parseInt(y2.value) > parseInt(y1.value))
                {
                    rect.style.width = (x1.value - x2.value) + 'px';
                    rect.style.height = (y2.value - y1.value) + 'px';
                    rect.style.left = x1.value - (x1.value - x2.value) + 'px';
                    rect.style.top = y1.value + 'px';
                }

                rect.style.borderColor = "red";
                rect.style.borderWidth = "2px";
                rect.style.backgroundColor = "rgba(51, 170, 51, .4)";
                rect.style.borderStyle = "solid";
                rect.setAttribute("onClick", "deplacer(" + idArea + ")");
                rect.id = "div" + (idArea).toString();
                divVoirArea.appendChild(rect);

                //console.log(objetmap);
            }
            else if(type === "circle")
            {
                // Point 1
                let xc1 = document.getElementById("xc1");
                let yc1 = document.getElementById("yc1");

                // rayon
                let rayon = document.getElementById("rayon");

                if(xc1.value.length === 0)
                {
                    xc1.value = 50;
                }
                if(yc1.value.length === 0)
                {
                    yc1.value = 50;
                }
                if(rayon.value.length === 0)
                {
                    rayon.value = 30;
                }

                let myObjetPoint = new objectPoint(xc1.value, yc1.value, rayon.value);

                let myObjetcCercle = new objectAreaCercle();
                myObjetcCercle.idArea  = idArea += 1;
                myObjetcCercle.ensembleObjectPoint = [];
                myObjetcCercle.addEnsembleObjectPoint(myObjetPoint);

                objetmap.addObjet(myObjetcCercle);

                let map = document.getElementById("map");

                let area = document.createElement("area");
                area.shape = type;
                area.coords = xc1.value + ',' + yc1.value + ',' + rayon.value;
                area.className = "areaMap";
                area.href = "#";
                area.id = "area" + (idArea).toString();

                map.appendChild(area);

                let div = document.getElementById("div-add");
                div.appendChild(map);

                let divVoirArea = document.getElementById("voirArea");
                let cercle = document.createElement('div');

                cercle.style.position = "absolute";
                cercle.style.borderRadius = "50%";
                cercle.style.height = rayon.value * 2 + "px";
                cercle.style.width = rayon.value * 2 + "px";
                cercle.style.borderColor = "blue";
                cercle.style.borderWidth = "2px";
                cercle.setAttribute("onClick", "deplacer(" + idArea + ")");
                cercle.style.borderStyle = "solid";
                cercle.style.top = xc1.value - rayon.value + "px";
                cercle.style.left = yc1.value - rayon.value + "px";


                cercle.id = "div" + (idArea).toString();
                divVoirArea.appendChild(cercle);

            }
        }
        else
        {
            alert('Choisir son type');
        }
    };
    $(document).ready(function () {
        // let nomMap = document.getElementById('nomMap');
        // console.log(nomMap);
        document.getElementById("nomMap").value = "krusty";
    });

</script>